{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shannon\\\\Desktop\\\\Project_3\\\\lets-play\\\\client\\\\src\\\\components\\\\Chat\\\\ChatScreen.js\";\nimport React from \"react\";\nimport Chatkit from '@pusher/chatkit-client';\nimport RoomList from \"./RoomList\";\nimport MessageList from \"./MessageList\";\nimport NewRoomForm from \"./NewRoomForm\";\nimport SendMessageForm from \"./SendMessageForm\";\nimport \"./Profile.css\";\n\nrequire(\"dotenv\").config();\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(props);\n    this.state = {\n      roomId: '',\n      messages: [],\n      joinableRooms: [],\n      joinedRooms: [] // username: localStorage.getItem(\"username\", userObject)\n\n    };\n    this.sendMessage = this.sendMessage.bind(this);\n    this.subscribeToRoom = this.subscribeToRoom.bind(this);\n    this.getRooms = this.getRooms.bind(this);\n  }\n\n  componentDidMount() {\n    const chatManager = new Chatkit.ChatManager({\n      instanceLocator: \"v1:us1:d763a976-7d94-4bf1-ab82-e3998634540e\",\n      userId: 'shannon',\n      tokenProvider: new Chatkit.TokenProvider({\n        url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/d763a976-7d94-4bf1-ab82-e3998634540e/token\"\n      })\n    });\n    chatManager.connect().then(currentUser => {\n      this.currentUser = currentUser;\n      this.getRooms();\n    }).catch(err => console.log('error on connecting: ', err));\n  }\n\n  getRooms() {\n    this.currentUser.getJoinableRooms().then(joinableRooms => {\n      this.setState({\n        joinableRooms,\n        joinedRooms: this.currentUser.rooms\n      });\n    }).catch(err => console.log('error on joinableRooms: ', err));\n  }\n\n  subscribeToRoom(roomId) {\n    this.setState({\n      messages: []\n    });\n    this.currentUser.subscribeToRoom({\n      roomId: roomId,\n      messageLimit: 100,\n      hooks: {\n        onNewMessage: message => {\n          this.setState({\n            messages: [...this.state.messages, message]\n          });\n        }\n      }\n    }).then(room => {\n      this.setState({\n        roomId: room.id\n      });\n      this.getRooms();\n    }).catch(err => console.log('error on subscribing to room: ', err));\n  }\n\n  sendMessage(text) {\n    this.currentUser.sendMessage({\n      text,\n      roomId: \"25ab793b-4cc9-4ad8-ae7f-f74ca5265508\"\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"personal-chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Messages\"), React.createElement(RoomList, {\n      subscribeToRoom: this.subscribeToRoom,\n      rooms: [...this.state.joinableRooms, ...this.state.joinedRooms],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(MessageList, {\n      messages: this.state.messages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(SendMessageForm, {\n      sendMessage: this.sendMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(NewRoomForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:\\Users\\Shannon\\Desktop\\Project_3\\lets-play\\client\\src\\components\\Chat\\ChatScreen.js"],"names":["React","Chatkit","RoomList","MessageList","NewRoomForm","SendMessageForm","require","config","Profile","Component","constructor","props","console","log","state","roomId","messages","joinableRooms","joinedRooms","sendMessage","bind","subscribeToRoom","getRooms","componentDidMount","chatManager","ChatManager","instanceLocator","userId","tokenProvider","TokenProvider","url","connect","then","currentUser","catch","err","getJoinableRooms","setState","rooms","messageLimit","hooks","onNewMessage","message","room","id","text","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Chatkit from '@pusher/chatkit-client';\r\nimport RoomList from \"./RoomList\";\r\nimport MessageList from \"./MessageList\";\r\nimport NewRoomForm from \"./NewRoomForm\";\r\nimport SendMessageForm from \"./SendMessageForm\";\r\nimport \"./Profile.css\";\r\nrequire(\"dotenv\").config();\r\n\r\nclass Profile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n    this.state = {\r\n      roomId: '',\r\n      messages: [],\r\n      joinableRooms: [],\r\n      joinedRooms: [],\r\n      // username: localStorage.getItem(\"username\", userObject)\r\n    }\r\n    \r\n    this.sendMessage = this.sendMessage.bind(this)\r\n    this.subscribeToRoom = this.subscribeToRoom.bind(this)\r\n    this.getRooms = this.getRooms.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const chatManager = new Chatkit.ChatManager({\r\n        instanceLocator: \"v1:us1:d763a976-7d94-4bf1-ab82-e3998634540e\",\r\n        userId: 'shannon',\r\n        tokenProvider: new Chatkit.TokenProvider({\r\n            url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/d763a976-7d94-4bf1-ab82-e3998634540e/token\"\r\n        })\r\n    })\r\n    \r\n    chatManager\r\n      .connect()\r\n      .then(currentUser => {\r\n        this.currentUser = currentUser\r\n        this.getRooms()\r\n      })\r\n      .catch(err => console.log('error on connecting: ', err))\r\n  }\r\n\r\n  getRooms() {\r\n    this.currentUser.getJoinableRooms()\r\n    .then(joinableRooms => {\r\n        this.setState({\r\n            joinableRooms,\r\n            joinedRooms: this.currentUser.rooms\r\n        })\r\n    })\r\n    .catch(err => console.log('error on joinableRooms: ', err))\r\n}\r\n\r\n  subscribeToRoom(roomId) {\r\n    this.setState({ messages: [] })\r\n    this.currentUser.subscribeToRoom({\r\n      roomId: roomId,\r\n      messageLimit: 100,\r\n      hooks: {\r\n          onNewMessage: message => {\r\n              this.setState({\r\n                  messages: [...this.state.messages, message]\r\n              })\r\n          }\r\n        }\r\n    })\r\n      .then(room => {\r\n        this.setState({\r\n          roomId: room.id\r\n        })\r\n        this.getRooms()\r\n    })\r\n    .catch(err => console.log('error on subscribing to room: ', err))\r\n}\r\n    \r\n  sendMessage(text) {\r\n    this.currentUser.sendMessage({\r\n      text,\r\n      roomId: \"25ab793b-4cc9-4ad8-ae7f-f74ca5265508\"\r\n    })\r\n  }\r\n\r\n  render() {\r\n    \r\n    return (\r\n      \r\n            <div className=\"personal-chat\">\r\n              <h4>Messages</h4>\r\n              {/* input chatroom info for messaging */}\r\n              <RoomList\r\n                subscribeToRoom={this.subscribeToRoom}\r\n                rooms={[...this.state.joinableRooms, ...this.state.joinedRooms]} />\r\n              <MessageList messages={this.state.messages} />\r\n              <SendMessageForm sendMessage={this.sendMessage} />\r\n              <NewRoomForm />\r\n            </div>\r\n    )\r\n  }\r\n          \r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}