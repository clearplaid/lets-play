{"ast":null,"code":"var _jsxFileName = \"/home/scott/Desktop/lets-play/client/src/pages/Profile.js\";\nimport React from \"react\";\nimport Chatkit from '@pusher/chatkit-client';\nimport RoomList from \"../components/Chat/RoomList\";\nimport MessageList from \"../components/Chat/MessageList\";\nimport NewRoomForm from \"../components/Chat/NewRoomForm\";\nimport SendMessageForm from \"../components/Chat/SendMessageForm\";\nimport API from \"../utils/API\";\nimport \"./Profile.css\";\n\nrequire(\"dotenv\").config();\n\nclass Profile extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      roomId: null,\n      messages: [],\n      joinableRooms: [],\n      joinedRooms: []\n    };\n    this.sendMessage = this.sendMessage.bind(this);\n    this.subscribeToRoom = this.subscribeToRoom.bind(this);\n    this.getRooms = this.getRooms.bind(this);\n  }\n\n  componentDidMount() {\n    API.getUserData().then(response => {\n      console.log(response);\n      console.log(response.data);\n      this.setState({\n        users: response.data\n      });\n    });\n    const chatManager = new Chatkit.ChatManager({\n      instanceLocator: \"v1:us1:d763a976-7d94-4bf1-ab82-e3998634540e\",\n      userId: 'shannon',\n      tokenProvider: new Chatkit.TokenProvider({\n        url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/d763a976-7d94-4bf1-ab82-e3998634540e/token\"\n      })\n    });\n    chatManager.connect().then(currentUser => {\n      this.currentUser = currentUser;\n      this.getRooms();\n    }).catch(err => console.log('error on connecting: ', err));\n  }\n\n  getRooms() {\n    this.currentUser.getJoinableRooms().then(joinableRooms => {\n      this.setState({\n        joinableRooms,\n        joinedRooms: this.currentUser.rooms\n      });\n    }).catch(err => console.log('error on joinableRooms: ', err));\n  }\n\n  subscribeToRoom(roomId) {\n    this.setState({\n      messages: []\n    });\n    this.currentUser.subscribeToRoom({\n      roomId: roomId,\n      messageLimit: 100,\n      hooks: {\n        onNewMessage: message => {\n          this.setState({\n            messages: [...this.state.messages, message]\n          });\n        }\n      }\n    }).then(room => {\n      this.setState({\n        roomId: room.id\n      });\n      this.getRooms();\n    }).catch(err => console.log('error on subscribing to room: ', err));\n  }\n\n  sendMessage(text) {\n    this.currentUser.sendMessage({\n      text,\n      roomId: \"25ab793b-4cc9-4ad8-ae7f-f74ca5265508\"\n    });\n  }\n\n  render() {\n    console.log(this.state.username);\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"profileTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Profile\")), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      href: \"#\",\n      className: \"avatar\",\n      alt: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Email\"))), React.createElement(\"div\", {\n      className: \"col-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"personal-chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Messages\"), React.createElement(MessageList, {\n      messages: this.state.messages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(SendMessageForm, {\n      sendMessage: this.sendMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(NewRoomForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"personal-chat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Guilds\"), React.createElement(RoomList, {\n      subscribeToRoom: this.subscribeToRoom,\n      rooms: [...this.state.joinableRooms, ...this.state.joinedRooms],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"owned-games\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Owned\"))), React.createElement(\"div\", {\n      className: \"col-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"wishlist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Wishlist\"))), React.createElement(\"div\", {\n      className: \"col-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"friendslist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Friends\")))));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/scott/Desktop/lets-play/client/src/pages/Profile.js"],"names":["React","Chatkit","RoomList","MessageList","NewRoomForm","SendMessageForm","API","require","config","Profile","Component","constructor","state","roomId","messages","joinableRooms","joinedRooms","sendMessage","bind","subscribeToRoom","getRooms","componentDidMount","getUserData","then","response","console","log","data","setState","users","chatManager","ChatManager","instanceLocator","userId","tokenProvider","TokenProvider","url","connect","currentUser","catch","err","getJoinableRooms","rooms","messageLimit","hooks","onNewMessage","message","room","id","text","render","username"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Chatkit from '@pusher/chatkit-client';\nimport RoomList from \"../components/Chat/RoomList\";\nimport MessageList from \"../components/Chat/MessageList\";\nimport NewRoomForm from \"../components/Chat/NewRoomForm\";\nimport SendMessageForm from \"../components/Chat/SendMessageForm\";\nimport API from \"../utils/API\";\nimport \"./Profile.css\";\nrequire(\"dotenv\").config();\n\nclass Profile extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      roomId: null,\n      messages: [],\n      joinableRooms: [],\n      joinedRooms: [],\n      \n    }\n    this.sendMessage = this.sendMessage.bind(this)\n    this.subscribeToRoom = this.subscribeToRoom.bind(this)\n    this.getRooms = this.getRooms.bind(this)\n  }\n\n  componentDidMount() {\n    API.getUserData()\n      .then(\n        (response) => {\n          console.log(response)\n          console.log(response.data)\n          this.setState({ users: response.data })\n      }\n  )\n\n    const chatManager = new Chatkit.ChatManager({\n        instanceLocator: \"v1:us1:d763a976-7d94-4bf1-ab82-e3998634540e\",\n        userId: 'shannon',\n        tokenProvider: new Chatkit.TokenProvider({\n            url: \"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/d763a976-7d94-4bf1-ab82-e3998634540e/token\"\n        })\n    })\n    \n    chatManager\n      .connect()\n      .then(currentUser => {\n        this.currentUser = currentUser\n        this.getRooms()\n      })\n      .catch(err => console.log('error on connecting: ', err))\n  }\n\n  getRooms() {\n    this.currentUser.getJoinableRooms()\n    .then(joinableRooms => {\n        this.setState({\n            joinableRooms,\n            joinedRooms: this.currentUser.rooms\n        })\n    })\n    .catch(err => console.log('error on joinableRooms: ', err))\n}\n\n  subscribeToRoom(roomId) {\n    this.setState({ messages: [] })\n    this.currentUser.subscribeToRoom({\n      roomId: roomId,\n      messageLimit: 100,\n      hooks: {\n          onNewMessage: message => {\n              this.setState({\n                  messages: [...this.state.messages, message]\n              })\n          }\n        }\n    })\n      .then(room => {\n        this.setState({\n          roomId: room.id\n        })\n        this.getRooms()\n    })\n    .catch(err => console.log('error on subscribing to room: ', err))\n}\n    \n  sendMessage(text) {\n    this.currentUser.sendMessage({\n      text,\n      roomId: \"25ab793b-4cc9-4ad8-ae7f-f74ca5265508\"\n    })\n  }\n\n  render() {\n    console.log(this.state.username);\n    return (\n      <main>\n        <h2 className=\"profileTitle\"><strong>Profile</strong></h2>\n        <div className=\"row\">\n          <div className=\"col-4\">\n            <img href=\"#\" className=\"avatar\" alt=\"avatar\"></img>\n            <ul>\n              <li>Name</li>\n              <li>Username</li>\n              <li>Email</li>\n            </ul>\n          </div>\n          <div className=\"col-5\">\n            <div className=\"personal-chat\">\n              <h4>Messages</h4>\n              {/* input chatroom info for messaging */}\n              <MessageList messages={this.state.messages} />\n              <SendMessageForm sendMessage={this.sendMessage} />\n              <NewRoomForm />\n            </div>\n          </div>\n          <div className=\"col-3\">\n            <div className=\"personal-chat\">\n              <h4>Guilds</h4>\n              {/* guilds belong to here  */}\n              <RoomList\n                subscribeToRoom={this.subscribeToRoom}\n                rooms={[...this.state.joinableRooms, ...this.state.joinedRooms]} />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-4\">\n            <div className=\"owned-games\">\n              <h4>Owned</h4>\n              {/* owned games here  */}\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"wishlist\">\n              <h4>Wishlist</h4>\n              {/* wishlist here  */}\n            </div>\n          </div>\n          <div className=\"col-4\">\n            <div className=\"friendslist\">\n              <h4>Friends</h4>\n              {/* friends here  */}\n            </div>\n          </div>\n        </div>\n      </main>\n    )\n  }\n\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}